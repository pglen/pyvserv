<h1>PROTOCOL</h1>

<p>This is a sketch for pyvserv the protocol. A hybrid between a spec and a design
document. The implementation follows loosely the outline of the interaction
outlined below.</p>

<pre><code>Client                          Server

TCP connection estabilished.    Send signon str
</code></pre>

<p>Initial state:</p>

<pre><code>query server                    send appropriate answer
akey requested                  send rendomly selected pub key
</code></pre>

<p>akey state:</p>

<pre><code>ready to estabilish session
session key generated,          session key stored
                                encrypted, transmitted
</code></pre>

<p>session state:</p>

<pre><code>estabilish credencials          confirm transaction state
</code></pre>

<p>transaction state:</p>

<pre><code>send rand str                   acknowledge estabilished session
with checksum                   seed with random amount of data

Transactions start              respond with packer data
send packer data
</code></pre>

<p>... disconnect ...</p>
